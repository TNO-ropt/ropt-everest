
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../running/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Basic Usage - ropt-everest Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#running-custom-optimization-workflows" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ropt-everest Documentation" class="md-header__button md-logo" aria-label="ropt-everest Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ropt-everest Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Basic Usage
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/TNO-ropt/ropt-everest" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ropt-everest Documentation" class="md-nav__button md-logo" aria-label="ropt-everest Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ropt-everest Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/TNO-ropt/ropt-everest" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Basic Usage
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Basic Usage
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running-custom-optimization-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      Running custom optimization workflows
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#everestplan-methods" class="md-nav__link">
    <span class="md-ellipsis">
      EverestPlan Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EverestPlan Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_optimizer" class="md-nav__link">
    <span class="md-ellipsis">
      add_optimizer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_ensemble_evaluator" class="md-nav__link">
    <span class="md-ellipsis">
      add_ensemble_evaluator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_store" class="md-nav__link">
    <span class="md-ellipsis">
      add_store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_tracker" class="md-nav__link">
    <span class="md-ellipsis">
      add_tracker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_cache" class="md-nav__link">
    <span class="md-ellipsis">
      add_cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_table" class="md-nav__link">
    <span class="md-ellipsis">
      add_table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running the plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../everest_config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Everest configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/everest_plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Everest Plan
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running-custom-optimization-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      Running custom optimization workflows
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#everestplan-methods" class="md-nav__link">
    <span class="md-ellipsis">
      EverestPlan Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EverestPlan Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_optimizer" class="md-nav__link">
    <span class="md-ellipsis">
      add_optimizer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_ensemble_evaluator" class="md-nav__link">
    <span class="md-ellipsis">
      add_ensemble_evaluator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_store" class="md-nav__link">
    <span class="md-ellipsis">
      add_store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_tracker" class="md-nav__link">
    <span class="md-ellipsis">
      add_tracker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_cache" class="md-nav__link">
    <span class="md-ellipsis">
      add_cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_table" class="md-nav__link">
    <span class="md-ellipsis">
      add_table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Basic Usage</h1>

<h2 id="running-custom-optimization-workflows">Running custom optimization workflows</h2>
<p>The ropt-everest plugin allows you to customize and extend the default
optimization workflow in Everest. Normally, Everest performs a single
optimization run based on the parameters in a YAML configuration file. However,
with ropt-everest, you can override this behavior.</p>
<p>To customize the workflow, create a Python file that contains a function named
<code>run_plan</code> with the following signature:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">run_plan</span><span class="p">(</span><span class="n">plan</span><span class="p">:</span> <span class="n">EverestPlan</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="o">...</span>
</span></code></pre></div>
<p>The only argument is an <a class="autorefs autorefs-internal" title="            ropt_everest.EverestPlan" href="../../reference/everest_plan/#ropt_everest.EverestPlan"><code>EverestPlan</code></a> object, which
is used to define and execute the optimization workflow. This object is created
by Everest and provided to <code>run_plan</code> via the <code>plan</code> parameter. </p>
<p>Everest can now directed to use this function to run the optimization by setting the
<code>ROPT_SCRIPT</code> environment variable. For instance:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">ROPT_SCRIPT</span><span class="o">=</span>run.py<span class="w"> </span>everest<span class="w"> </span>run<span class="w"> </span>config.yml
</span></code></pre></div>
<p>Developing and executing a custom workflow involves two key aspects:</p>
<ol>
<li>
<p><strong>Defining the Workflow:</strong> This entails adding the individual steps and
    their associated event handlers to the <code>EverestPlan</code>. These steps can
    include optimizers, evaluators, and other custom operations. Result
    handlers, such as trackers and table outputs, capture the outcomes of each
    step.</p>
</li>
<li>
<p><strong>Executing and Inspecting:</strong> This process involves arranging the defined
    steps in the desired order of execution and leveraging the event handlers
    to analyze the output data. The <code>EverestPlan</code> automatically manages the
    execution of these steps, guaranteeing their correct operation and ensuring
    that results are consistently captured and made accessible. Because the
    <code>run_plan</code> function is implemented in standard Python, you can use the full
    power of Python programming (e.g., loops, conditional statements, and custom
    functions) to create sophisticated and adaptable optimization workflows.</p>
</li>
</ol>
<p>A <code>run_plan</code> function constructs a workflow by creating <em>step</em> objects and
<em>handler</em> objects. You create these objects by calling methods on the <code>plan</code>
object, typically using the pattern <code>plan.add_*()</code>. For example,
<code>plan.add_optimizer()</code> creates an optimizer step and registers it with the plan.
When added to the plan, step objects generally don't require arguments. Instead,
you configure and execute them later by calling their <code>run</code> method (e.g., to
start an optimization).</p>
<p>The <code>run</code> method may accept additional arguments to customize the step's
behavior. As steps execute, they may generate results. The plan receives these
results and forwards them to any event handler objects that have expressed
interest. When creating event handler objects, you specify one or more step
objects they should monitor, indicating their interest in receiving results from
those steps. Handlers may also accept additional configuration arguments during
creation to refine how they process these results.</p>
<p>In summary, building an optimization workflow involves: 1) defining one or more
steps, 2) adding event handlers to process the results of those steps, and 3)
finally, executing the steps by calling their <code>run</code> methods, potentially
multiple times.</p>
<p>For example, this script reproduces the default Everest optimization, assuming
the Everest configuration file is called <code>config.yml</code>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">ropt_everest</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">run_plan</span><span class="p">(</span><span class="n">plan</span><span class="p">):</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yml&quot;</span><span class="p">)</span>  <span class="c1"># Load the configuration</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>    <span class="n">optimizer</span> <span class="o">=</span> <span class="n">plan</span><span class="o">.</span><span class="n">add_optimizer</span><span class="p">()</span>    <span class="c1"># Add an optimizer step</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    <span class="n">plan</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">optimizer</span><span class="p">)</span>           <span class="c1"># Add a table event handler</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>    <span class="n">optimizer</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>               <span class="c1"># Run the optimizer</span>
</span></code></pre></div>
<p>This function executes a basic optimization workflow by performing these steps:</p>
<ol>
<li><strong>Loading Configuration</strong>: Load an Everest configuration using the
    <a class="autorefs autorefs-internal" title="            ropt_everest.load_config" href="../../reference/everest_plan/#ropt_everest.load_config"><code>load_config</code></a> function.</li>
<li><strong>Plan Creation</strong>: Everest creates an
    <a class="autorefs autorefs-internal" title="            ropt_everest.EverestPlan" href="../../reference/everest_plan/#ropt_everest.EverestPlan"><code>EverestPlan</code></a> object and passes it to <code>run_plan</code>
    via the <code>plan</code> parameter. In addition it passes the Everest configuration
    dictionary, although it is not used in this example.</li>
<li><strong>Optimizer Addition</strong>: An optimizer step is added to the plan using the
    <a class="autorefs autorefs-internal" title="            add_optimizer" href="../../reference/everest_plan/#ropt_everest.EverestPlan.add_optimizer"><code>add_optimizer</code></a> method.</li>
<li><strong>Table Handler Addition</strong>: A table event handler is added to the plan using
    the <a class="autorefs autorefs-internal" title="            add_table" href="../../reference/everest_plan/#ropt_everest.EverestPlan.add_table"><code>add_table</code></a> method. This will save
    the optimization results in a set of tables.</li>
<li><strong>Optimizer Execution</strong>: The optimization process is started by calling the
    <a class="autorefs autorefs-internal" title="            run" href="../../reference/everest_plan/#ropt_everest.EverestOptimizerStep.run"><code>run</code></a> method of the optimizer step. It
    uses the configuration that was passed to Everest without modification.</li>
</ol>
<h2 id="everestplan-methods">EverestPlan Methods</h2>
<p>The <code>EverestPlan</code> class provides a high-level interface for defining and
managing optimization workflows in Everest. It allows you to add various steps
to the plan, such as optimizers, and evaluators, that are then executed to
achieve the desired optimization goal.</p>
<p><strong>Key Features:</strong></p>
<ul>
<li><strong>Step Management:</strong> Add and manage different types of optimization steps,
    including optimizers, and evaluators.</li>
<li><strong>Tracking and Monitoring:</strong> Incorporate trackers to monitor the progress of
    specific steps and collect relevant results.</li>
<li><strong>Table Generation:</strong> Generate tables to summarize the results of the
    optimization process.</li>
<li><strong>Configuration Handling:</strong> Manage Everest configurations, including the
    ability to override default settings.</li>
<li><strong>Metadata Association:</strong> Associate arbitrary metadata with steps and results,
   facilitating the tracking of additional information.</li>
<li><strong>Direct Execution:</strong> Execute the plan directly, providing more control over
    stdout and error traces.</li>
<li><strong>Caching Results:</strong> Add cache objects to the plan that use the results in
    handlers defined in the plan. Any results stored by those handlers can be
    re-used by the optimizer and evaluation steps.</li>
</ul>
<p>The <a class="autorefs autorefs-internal" title="            ropt_everest.EverestPlan" href="../../reference/everest_plan/#ropt_everest.EverestPlan"><code>EverestPlan</code></a> object provides several methods
for building and managing optimization workflows:</p>
<h3 id="add_optimizer"><a class="autorefs autorefs-internal" title="            add_optimizer" href="../../reference/everest_plan/#ropt_everest.EverestPlan.add_optimizer"><code>add_optimizer</code></a></h3>
<p>Adds an optimizer step to the workflow plan. The resulting
<a class="autorefs autorefs-internal" title="            ropt_everest.EverestOptimizerStep" href="../../reference/everest_plan/#ropt_everest.EverestOptimizerStep"><code>EverestOptimizerStep</code></a> object can be
executed using its <a class="autorefs autorefs-internal" title="            run" href="../../reference/everest_plan/#ropt_everest.EverestOptimizerStep.run"><code>run</code></a> method. The
<code>run</code> method supports the following parameters to customize its behavior:</p>
<ul>
<li><strong>config</strong> (<code>dict</code>, optional): An Everest configuration dictionary. You can
    copy and modify the configuration passed to the <code>run_plan</code> function to
    create a suitable configuration, or you can construct or load your own.</li>
<li><strong>controls</strong> (<code>array-like</code>, optional): Initial control values for the
    optimizer. If not specified, the initial values from the Everest
    configuration are used.</li>
<li><strong>metadata</strong> (<code>dict</code>, optional): A dictionary of metadata to be associated
    with each result generated by the optimizer.</li>
<li><strong>output_dir</strong> (<code>string</code>, optional): A directory (absolute or relative) where
    the optimizer stores output. This is  useful when multiple optimization
    runs are performed to prevent output from bing overwritten.</li>
</ul>
<h3 id="add_ensemble_evaluator"><a class="autorefs autorefs-internal" title="            add_ensemble_evaluator" href="../../reference/everest_plan/#ropt_everest.EverestPlan.add_ensemble_evaluator"><code>add_ensemble_evaluator</code></a></h3>
<p>Adds an ensemble evaluator step to the workflow plan. The resulting
<a class="autorefs autorefs-internal" title="            ropt_everest.EverestEnsembleEvaluatorStep" href="../../reference/everest_plan/#ropt_everest.EverestEnsembleEvaluatorStep"><code>EverestEnsembleEvaluatorStep</code></a>
object can be executed using its
<a class="autorefs autorefs-internal" title="            run" href="../../reference/everest_plan/#ropt_everest.EverestEnsembleEvaluatorStep.run"><code>run</code></a> method. The <code>run</code> method
supports the following parameters to customize its behavior:</p>
<ul>
<li><strong>config</strong> (<code>dict</code>, optional): An Everest configuration dictionary. You can
    copy and modify the configuration passed to the <code>run_plan</code> function to
    create a suitable configuration, or you can construct or load your own.</li>
<li><strong>controls</strong> (<code>array-like</code>, optional): The controls that will be evaluated.
    This can be a single vector, a sequence of multiple vectors, or a 2D matrix
    where the control vectors are the rows. If multiple vectors or a 2D matrix
    is supplied, an evaluation is performed for each control vector. If not
    specified, the initial values from the Everest configuration are used.</li>
<li><strong>metadata</strong> (<code>dict</code>, optional): A dictionary of metadata to be associated
    with each result generated by the evaluator.</li>
</ul>
<h3 id="add_store"><a class="autorefs autorefs-internal" title="            add_tracker" href="../../reference/everest_plan/#ropt_everest.EverestPlan.add_tracker"><code>add_store</code></a></h3>
<p>Adds a result store to the plan to record the progress of a step. The resulting
<a class="autorefs autorefs-internal" title="            ropt_everest.EverestStore" href="../../reference/everest_plan/#ropt_everest.EverestStore"><code>EverestStore</code></a> object stores results emitted by
optimizers and evaluators that it is monitoring. It accepts the following
arguments:</p>
<ul>
<li><strong>steps</strong>: A single step object or a list of step objects to track. The
    tracker will only record results generated by the specified steps.</li>
</ul>
<p>The tracker object returned by <a class="autorefs autorefs-internal" title="            add_store" href="../../reference/everest_plan/#ropt_everest.EverestPlan.add_store"><code>add_store</code></a>
supports the following properties to inspect the results that it stores:</p>
<ul>
<li><strong><a class="autorefs autorefs-internal" title="            results


  
      property
  " href="../../reference/everest_plan/#ropt_everest.EverestStore.results"><code>results</code></a></strong>:  The list of results that
  is stored.</li>
<li><strong><a class="autorefs autorefs-internal" title="            controls


  
      property
  " href="../../reference/everest_plan/#ropt_everest.EverestStore.controls"><code>controls</code></a></strong>: The controls in the
  stored results.</li>
</ul>
<p>In addition, the following methods are available:</p>
<ul>
<li><strong><a class="autorefs autorefs-internal" title="            reset" href="../../reference/everest_plan/#ropt_everest.EverestStore.reset"><code>reset</code></a></strong>: Reset the tracker to contain
    no results.</li>
<li><strong><a class="autorefs autorefs-internal" title="            dataframe" href="../../reference/everest_plan/#ropt_everest.EverestStore.dataframe"><code>dataframe</code></a></strong>: Export the results
    as Pandas data frames.</li>
</ul>
<h3 id="add_tracker"><a class="autorefs autorefs-internal" title="            add_tracker" href="../../reference/everest_plan/#ropt_everest.EverestPlan.add_tracker"><code>add_tracker</code></a></h3>
<p>Adds a result tracker to the plan to monitor the progress of a step. The
resulting <a class="autorefs autorefs-internal" title="            ropt_everest.EverestTracker" href="../../reference/everest_plan/#ropt_everest.EverestTracker"><code>EverestTracker</code></a> object tracks and
stores results emitted by optimizers and evaluators that it is monitoring.
It accepts the following arguments:</p>
<ul>
<li><strong>steps</strong>: A single step object or a list of step objects to track. The
    tracker will only record results generated by the specified steps.</li>
<li><strong>what</strong>: This argument determines which results the tracker should
    record. Possible values:<ul>
<li><code>"best"</code>: Only the best result found so far is tracked. This is the default.</li>
<li><code>"last"</code>: Only the most recently generated result is tracked.</li>
</ul>
</li>
<li><strong>constraint_tolerance</strong>: A tolerance for detecting constraint violations.</li>
</ul>
<p>The tracker object returned by <a class="autorefs autorefs-internal" title="            add_tracker" href="../../reference/everest_plan/#ropt_everest.EverestPlan.add_tracker"><code>add_tracker</code></a>
supports the following properties to inspect the results that it stores:</p>
<ul>
<li><strong><a class="autorefs autorefs-internal" title="            results


  
      property
  " href="../../reference/everest_plan/#ropt_everest.EverestTracker.results"><code>results</code></a></strong>:  The results object that
  is stored.</li>
<li><strong><a class="autorefs autorefs-internal" title="            controls


  
      property
  " href="../../reference/everest_plan/#ropt_everest.EverestTracker.controls"><code>controls</code></a></strong>: The controls in the
  stored results.</li>
</ul>
<p>In addition, the following methods are available:</p>
<ul>
<li><strong><a class="autorefs autorefs-internal" title="            reset" href="../../reference/everest_plan/#ropt_everest.EverestTracker.reset"><code>reset</code></a></strong>: Reset the tracker to contain
    no results.</li>
<li><strong><a class="autorefs autorefs-internal" title="            dataframe" href="../../reference/everest_plan/#ropt_everest.EverestTracker.dataframe"><code>dataframe</code></a></strong>: Export the results
    as Pandas data frames.</li>
</ul>
<h3 id="add_cache"><a class="autorefs autorefs-internal" title="            add_cache" href="../../reference/everest_plan/#ropt_everest.EverestPlan.add_cache"><code>add_cache</code></a></h3>
<p>The <code>add_cache</code> method adds a cache object to the plan. The resulting
<a class="autorefs autorefs-internal" title="            ropt_everest.EverestCachedEvaluator" href="../../reference/everest_plan/#ropt_everest.EverestCachedEvaluator"><code>EverestCachedEvaluator</code></a> object can be
used prevent unnecessary re-evaluation of controls that have already were
evaluated before. It takes the following two arguments:</p>
<ul>
<li><strong>steps:</strong> A step, or a sequence of steps that can make use of the cache object.</li>
<li><strong>source:</strong> The event handlers to use by the cache object.</li>
</ul>
<h3 id="add_table"><a class="autorefs autorefs-internal" title="            add_table" href="../../reference/everest_plan/#ropt_everest.EverestPlan.add_table"><code>add_table</code></a></h3>
<p>Adds a table event handler to the plan. The resulting
<a class="autorefs autorefs-internal" title="            ropt_everest.EverestTableHandler" href="../../reference/everest_plan/#ropt_everest.EverestTableHandler"><code>EverestTableHandler</code></a> object tracks and
stores results emitted by optimizers and evaluators in tables on file. It
accepts a single argument:</p>
<ul>
<li><strong>steps</strong>: A single step object or a list of step objects to track. The
    tracker will only record results generated by the specified steps.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.expand", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>